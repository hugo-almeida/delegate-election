<div ng-controller="applyCtrl as apply">
	<div>
		<!-- Default panel contents -->
		<h3>Detalhes</h3>
		
		<!-- Table -->
		<table class="table">
			<tr>
				<th class="col-md-2">Curso</th>
				<td class="col-md-8 col-md-8-offset-4">{{degree.registrations[0].name}}</td> <!--  needs to be fixed to search for roles with type student -->
			</tr>
			<tr>
				<th>Ano Lectivo</th>
				<td>2014/2015</td>
			</tr>
			<tr>
				<th>Ano Curricular</th>
				<td>1</td>
			</tr>
			<tr>
				<th>Período de Candidatura</th>
				<td>23/04/2015 - 25/04/2015</td>
			</tr>
		</table>
	</div>
	
	<h3>Candidatos</h3>
	<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#applyModal" ng-hide="applied">
		<span class="glyphicon glyphicon-plus"></span>
		Candidata-te
	</button>
	<button class="btn btn-primary" ng-click="reloadCandidates()" ng-show="debug">Reload Candidates</button>
	<div class="panel panel-default">
		<div class="panel-heading">Name</div>
		<table class="table">
			<tr ng-repeat="candidato in candidatos | orderBy:'name'">
				<td style="width:35px; height:40px">
					<img class="center-block" ng-src="data:{{candidato.photo.type}};base64,{{candidato.photo.data}}" height="30" width="30"></img><!-- using logged user photo, should use candidate photo -->
				</td>
				<td>
					<strong>{{candidato.name}}</strong>
					<small>{{candidato.username}}</small>
					<button type="button" class="pull-right close" ng-show="candidato.username == credentials.username" ng-click="unapply()"></button><!-- missing correct canvas element -->
				</td>
			</tr>
		</table>
	</div>
	
	<div id="applyModal" class="modal fade" role="dialog">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h3>
						<strong>Confirmação de Candidatura</strong>
						<p>
							<small>This is a short helper text to undestand what they're doing</small>
						</p>
					</h3>
				    <button type="button" class="close" data-dismiss="modal"></button>
				</div>
				<div class="modal-body">
	        		<table class="table">
	        			<tr>
							<th class="col-md-6">Candidato</th>
							<td class="col-md-12 col-md-12-offset-4">{{credentials.name}}</td> <!--  needs to be fixed to search for roles with type student -->
						</tr>
						<tr>
							<th>Curso</th>
							<td>{{degree.registrations[0].name}}</td> <!--  needs to be fixed to search for roles with type student -->
						</tr>
						<tr>
							<th>Ano Lectivo</th>
							<td>2014/2015</td>
						</tr>
						<tr>
							<th>Ano Curricular</th>
							<td>1</td>
						</tr>
						<tr>
							<th>Candidaturas</th>
							<td>{{candidatos.length}}</td>
						</tr>
						<tr>
							<th>Período de votação</th>
							<td>23/04/2015 - 25/04/2015</td>
						</tr>
					</table>
	      		</div>
	      		<div class="modal-footer">
	        			<button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
	        			<button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="apply()">Confirmar</button>
	      		</div>
			</div>
		</div>
	</div>
</div>